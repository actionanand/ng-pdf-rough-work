"use strict";(self.webpackChunkng_pdf_rough_work=self.webpackChunkng_pdf_rough_work||[]).push([[895],{2895:(y,d,s)=>{s.r(d),s.d(d,{NpmPdfViewerComponent:()=>a});var f=s(6895),t=s(8256);const p=["iframe"];let h=(()=>{class n{constructor(){this.onBeforePrint=new t.vpe,this.onAfterPrint=new t.vpe,this.onDocumentLoad=new t.vpe,this.onPageChange=new t.vpe,this.externalWindow=!1,this.showSpinner=!0,this.openFile=!0,this.download=!0,this.viewBookmark=!0,this.print=!0,this.fullScreen=!0,this.find=!0,this.useOnlyCssZoom=!1,this.errorOverride=!1,this.errorAppend=!0,this.diagnosticLogs=!0}set page(i){this._page=i,this.PDFViewerApplication?this.PDFViewerApplication.page=this._page:this.diagnosticLogs&&console.warn("Document is not loaded yet!!!. Try to set page# after full load. Ignore this warning if you are not setting page# using '.' notation. (E.g. pdfViewer.page = 5;)")}get page(){if(this.PDFViewerApplication)return this.PDFViewerApplication.page;this.diagnosticLogs&&console.warn("Document is not loaded yet!!!. Try to retrieve page# after full load.")}set pdfSrc(i){this._src=i}get pdfSrc(){return this._src}get PDFViewerApplicationOptions(){let i=null;return this.externalWindow?this.viewerTab&&(i=this.viewerTab.PDFViewerApplicationOptions):this.iframe.nativeElement.contentWindow&&(i=this.iframe.nativeElement.contentWindow.PDFViewerApplicationOptions),i}get PDFViewerApplication(){let i=null;return this.externalWindow?this.viewerTab&&(i=this.viewerTab.PDFViewerApplication):this.iframe.nativeElement.contentWindow&&(i=this.iframe.nativeElement.contentWindow.PDFViewerApplication),i}receiveMessage(i){if(i.data&&i.data.viewerId&&i.data.event){let r=i.data.event,l=i.data.param;this.viewerId==i.data.viewerId&&(this.onBeforePrint&&"beforePrint"==r?this.onBeforePrint.emit():this.onAfterPrint&&"afterPrint"==r?this.onAfterPrint.emit():this.onDocumentLoad&&"pagesLoaded"==r?this.onDocumentLoad.emit(l):this.onPageChange&&"pageChange"==r&&this.onPageChange.emit(l))}}ngOnInit(){window.addEventListener("message",this.receiveMessage.bind(this),!1),this.externalWindow||this.loadPdf()}refresh(){this.loadPdf()}loadPdf(){if(!this._src)return;if(this.externalWindow&&(typeof this.viewerTab>"u"||this.viewerTab.closed)){if(this.viewerTab=window.open("","_blank",this.externalWindowOptions||""),null==this.viewerTab)return void(this.diagnosticLogs&&console.error("ng2-pdfjs-viewer: For 'externalWindow = true'. i.e opening in new tab to work, pop-ups should be enabled."));this.showSpinner&&this.viewerTab.document.write('\n          <style>\n          .loader {\n            position: fixed;\n            left: 40%;\n            top: 40%;\n            border: 16px solid #f3f3f3;\n            border-radius: 50%;\n            border-top: 16px solid #3498db;\n            width: 120px;\n            height: 120px;\n            animation: spin 2s linear infinite;\n          }\n          @keyframes spin {\n            0% {\n              transform: rotate(0deg);\n            }\n            100% {\n              transform: rotate(360deg);\n            }\n          }\n          </style>\n          <div class="loader"></div>\n        ')}let i,e;if(this._src instanceof Blob)i=encodeURIComponent(URL.createObjectURL(this._src));else if(this._src instanceof Uint8Array){let r=new Blob([this._src],{type:"application/pdf"});i=encodeURIComponent(URL.createObjectURL(r))}else i=this._src;e=this.viewerFolder?`${this.viewerFolder}/web/viewer.html`:"assets/pdfjs/web/viewer.html",e+=`?file=${i}`,typeof this.viewerId<"u"&&(e+=`&viewerId=${this.viewerId}`),typeof this.onBeforePrint<"u"&&(e+="&beforePrint=true"),typeof this.onAfterPrint<"u"&&(e+="&afterPrint=true"),typeof this.onDocumentLoad<"u"&&(e+="&pagesLoaded=true"),typeof this.onPageChange<"u"&&(e+="&pageChange=true"),this.downloadFileName&&(this.downloadFileName.endsWith(".pdf")||(this.downloadFileName+=".pdf"),e+=`&fileName=${this.downloadFileName}`),typeof this.openFile<"u"&&(e+=`&openFile=${this.openFile}`),typeof this.download<"u"&&(e+=`&download=${this.download}`),this.startDownload&&(e+=`&startDownload=${this.startDownload}`),typeof this.viewBookmark<"u"&&(e+=`&viewBookmark=${this.viewBookmark}`),typeof this.print<"u"&&(e+=`&print=${this.print}`),this.startPrint&&(e+=`&startPrint=${this.startPrint}`),typeof this.fullScreen<"u"&&(e+=`&fullScreen=${this.fullScreen}`),typeof this.find<"u"&&(e+=`&find=${this.find}`),this.lastPage&&(e+=`&lastpage=${this.lastPage}`),this.rotatecw&&(e+=`&rotatecw=${this.rotatecw}`),this.rotateccw&&(e+=`&rotateccw=${this.rotateccw}`),this.cursor&&(e+=`&cursor=${this.cursor}`),this.scroll&&(e+=`&scroll=${this.scroll}`),this.spread&&(e+=`&spread=${this.spread}`),this.locale&&(e+=`&locale=${this.locale}`),this.useOnlyCssZoom&&(e+=`&useOnlyCssZoom=${this.useOnlyCssZoom}`),(this._page||this.zoom||this.nameddest||this.pagemode)&&(e+="#"),this._page&&(e+=`&page=${this._page}`),this.zoom&&(e+=`&zoom=${this.zoom}`),this.nameddest&&(e+=`&nameddest=${this.nameddest}`),this.pagemode&&(e+=`&pagemode=${this.pagemode}`),(this.errorOverride||this.errorAppend)&&(e+=`&errorMessage=${this.errorMessage}`,this.errorOverride&&(e+=`&errorOverride=${this.errorOverride}`),this.errorAppend&&(e+=`&errorAppend=${this.errorAppend}`)),this.externalWindow?this.viewerTab.location.href=e:this.iframe.nativeElement.src=e}}return n.\u0275fac=function(i){return new(i||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["ng2-pdfjs-viewer"]],viewQuery:function(i,e){if(1&i&&t.Gf(p,7),2&i){let r;t.iGM(r=t.CRH())&&(e.iframe=r.first)}},inputs:{viewerId:"viewerId",viewerFolder:"viewerFolder",externalWindow:"externalWindow",showSpinner:"showSpinner",downloadFileName:"downloadFileName",openFile:"openFile",download:"download",startDownload:"startDownload",viewBookmark:"viewBookmark",print:"print",startPrint:"startPrint",fullScreen:"fullScreen",find:"find",zoom:"zoom",nameddest:"nameddest",pagemode:"pagemode",lastPage:"lastPage",rotatecw:"rotatecw",rotateccw:"rotateccw",cursor:"cursor",scroll:"scroll",spread:"spread",locale:"locale",useOnlyCssZoom:"useOnlyCssZoom",errorOverride:"errorOverride",errorAppend:"errorAppend",errorMessage:"errorMessage",diagnosticLogs:"diagnosticLogs",externalWindowOptions:"externalWindowOptions",page:"page",pdfSrc:"pdfSrc"},outputs:{onBeforePrint:"onBeforePrint",onAfterPrint:"onAfterPrint",onDocumentLoad:"onDocumentLoad",onPageChange:"onPageChange"},decls:2,vars:1,consts:[["title","ng2-pdfjs-viewer","width","100%","height","100%",3,"hidden"],["iframe",""]],template:function(i,e){1&i&&t._UZ(0,"iframe",0,1),2&i&&t.Q6J("hidden",e.externalWindow||!e.externalWindow&&!e.pdfSrc)},encapsulation:2}),n})(),c=(()=>{class n{static forRoot(){return{ngModule:n}}}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[f.ez]}),n})();var w=s(2340),m=s(4132),u=s(1735);const g=["pdfViewerAutoLoad"],v=["externalPdfViewer"];function P(n,o){1&n&&(t.TgZ(0,"div",10),t._UZ(1,"app-spinner"),t.qZA())}class a{constructor(o){this.pdfServ=o,this.loading=!0}ngOnInit(){}ngAfterViewInit(){this.pdfDownload()}openPdfInNewTab(){this.pdfDownload(!0)}pdfDownload(o=!1){this.pdfUrl=w.N.backend.localPdf,this.pdfSub=this.pdfServ.downloadPdf$(this.pdfUrl).subscribe(i=>{setTimeout(()=>this.loading=!1,2e3),o?(this.extPdfViewer.pdfSrc=i,this.extPdfViewer.refresh()):(this.pdfViewer.pdfSrc=i,this.pdfViewer.refresh())})}ngOnDestroy(){this.pdfSub&&this.pdfSub.unsubscribe()}}a.\u0275fac=function(o){return new(o||a)(t.Y36(u.F))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-npm-pdf-viewer"]],viewQuery:function(o,i){if(1&o&&(t.Gf(g,5),t.Gf(v,5)),2&o){let e;t.iGM(e=t.CRH())&&(i.pdfViewer=e.first),t.iGM(e=t.CRH())&&(i.extPdfViewer=e.first)}},standalone:!0,features:[t.jDz],decls:12,vars:5,consts:[[1,"pdf-title"],["class","spinner-wrap",4,"ngIf"],[1,"btn-wrap"],[3,"click"],[3,"externalWindow","downloadFileName","download"],["externalPdfViewer",""],[1,"pdf-container"],[2,"height","100%","width","100%"],[3,"downloadFileName"],["pdfViewerAutoLoad",""],[1,"spinner-wrap"]],template:function(o,i){1&o&&(t.TgZ(0,"h1",0),t._uU(1,"PDF rendering using npm package - PDF as byte array or Blob!"),t.qZA(),t.YNc(2,P,2,0,"div",1),t.TgZ(3,"div",2)(4,"button",3),t.NdJ("click",function(){return i.openPdfInNewTab()}),t._uU(5,"Open in new tab"),t.qZA()(),t._UZ(6,"ng2-pdfjs-viewer",4,5),t.TgZ(8,"div",6)(9,"div",7),t._UZ(10,"ng2-pdfjs-viewer",8,9),t.qZA()()),2&o&&(t.xp6(2),t.Q6J("ngIf",i.loading),t.xp6(4),t.Q6J("externalWindow",!0)("downloadFileName","custom view pdf")("download",!1),t.xp6(4),t.Q6J("downloadFileName","custom-view"))},dependencies:[f.O5,c,h,m.O],styles:[".pdf-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin:0 auto;width:70vw;height:80vh}.pdf-content[_ngcontent-%COMP%]{width:100%;height:100%}.pdf-title[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-bottom:.8rem}.btn-wrap[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-bottom:1rem}.btn-wrap[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#adff2f;font-weight:700;font-style:italic;padding:.3rem}.btn-wrap[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:green;color:#fff;cursor:pointer}.spinner-wrap[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:70vh;width:100vw;position:absolute}@media only screen and (max-width: 850px){.pdf-container[_ngcontent-%COMP%]{width:90vw}}@media only screen and (min-width: 1100px){.pdf-container[_ngcontent-%COMP%]{width:60vw}}"]})}}]);